{
const a4_0xa371=['objecteditor:start','drawRect','setCollision','show','Rotation','drawLine','gui','Cancel','world3dToScreen2d','add','stringify','drawText','Move','cursor','getRotation','getCoords','placeOnGroundProperly','Vector3','Save','rotation','down','render','game','graphics','Ground','call','position','click','events','objects'];(function(_0x3aa230,_0xa37180){const _0x381aac=function(_0x100ab7){while(--_0x100ab7){_0x3aa230['push'](_0x3aa230['shift']());}};_0x381aac(++_0xa37180);}(a4_0xa371,0x15a));const a4_0x381a=function(_0x3aa230,_0xa37180){_0x3aa230=_0x3aa230-0x0;let _0x381aac=a4_0xa371[_0x3aa230];return _0x381aac;};var res=mp[a4_0x381a('0x6')][a4_0x381a('0x7')]['getScreenActiveResolution'](0x0,0x0);let MOVE_SENSITIVTY=0x32;let ROT_SENSITIVITY=0x320;let selObj=null;let oldPos;let oldRot;let mode='Move';let curBtn;let oldcursorPos=[0x0,0x0];let xbox;let ybox;let zbox;let switchbox;let groundbox;let cancelbox;let savebox;mp[a4_0x381a('0xc')][a4_0x381a('0x17')](a4_0x381a('0xe'),_0x1da1e2=>{mp[a4_0x381a('0x14')]['cursor'][a4_0x381a('0x11')](!![],!![]);selObj=mp[a4_0x381a('0xd')]['at'](_0x1da1e2);selObj[a4_0x381a('0x10')](![],![]);oldPos=selObj[a4_0x381a('0xa')];oldRot=selObj[a4_0x381a('0x3')];});mp[a4_0x381a('0xc')]['add'](a4_0x381a('0x5'),()=>{try{if(selObj){mp[a4_0x381a('0x6')]['graphics']['drawLine'](selObj[a4_0x381a('0xa')]['x']-1.5,selObj[a4_0x381a('0xa')]['y'],selObj[a4_0x381a('0xa')]['z'],selObj[a4_0x381a('0xa')]['x']+1.5,selObj[a4_0x381a('0xa')]['y'],selObj[a4_0x381a('0xa')]['z'],0x0,0x0,0xff,0xff);mp[a4_0x381a('0x6')][a4_0x381a('0x7')][a4_0x381a('0x13')](selObj['position']['x'],selObj['position']['y']-1.5,selObj['position']['z'],selObj[a4_0x381a('0xa')]['x'],selObj[a4_0x381a('0xa')]['y']+1.5,selObj[a4_0x381a('0xa')]['z'],0xff,0x0,0x0,0xff);mp[a4_0x381a('0x6')][a4_0x381a('0x7')]['drawLine'](selObj['position']['x'],selObj['position']['y'],selObj[a4_0x381a('0xa')]['z']-1.5,selObj['position']['x'],selObj[a4_0x381a('0xa')]['y'],selObj[a4_0x381a('0xa')]['z']+1.5,0x0,0xff,0x0,0xff);xbox=mp[a4_0x381a('0x6')][a4_0x381a('0x7')]['world3dToScreen2d'](selObj[a4_0x381a('0xa')]['x']+1.5,selObj[a4_0x381a('0xa')]['y'],selObj[a4_0x381a('0xa')]['z']);ybox=mp[a4_0x381a('0x6')]['graphics'][a4_0x381a('0x16')](selObj[a4_0x381a('0xa')]['x'],selObj[a4_0x381a('0xa')]['y']+1.5,selObj[a4_0x381a('0xa')]['z']);zbox=mp['game'][a4_0x381a('0x7')]['world3dToScreen2d'](selObj[a4_0x381a('0xa')]['x'],selObj['position']['y'],selObj[a4_0x381a('0xa')]['z']+1.5);switchbox=mp[a4_0x381a('0x6')]['graphics'][a4_0x381a('0x16')](selObj[a4_0x381a('0xa')]['x']-0.8,selObj['position']['y']-0.8,selObj[a4_0x381a('0xa')]['z']);if(switchbox!=undefined){groundbox={'x':switchbox['x']+0.065,'y':switchbox['y']};cancelbox={'x':switchbox['x']+0.13,'y':switchbox['y']};savebox={'x':switchbox['x']+0.195,'y':switchbox['y']};}else{cancelbox=undefined,savebox=undefined;}if(xbox!=undefined){mp[a4_0x381a('0x6')]['graphics']['drawRect'](xbox['x'],xbox['y'],0.015,0.026,0x0,0x0,0xff,0xff);mp[a4_0x381a('0x6')]['graphics'][a4_0x381a('0x19')]('X',[xbox['x'],xbox['y']-0.015],{'font':0x2,'color':[0xff,0xff,0xff,0xff],'scale':[0.5,0.5],'outline':![]});}if(ybox!=undefined){mp[a4_0x381a('0x6')][a4_0x381a('0x7')][a4_0x381a('0xf')](ybox['x'],ybox['y'],0.015,0.026,0xff,0x0,0x0,0xff);mp[a4_0x381a('0x6')]['graphics']['drawText']('Y',[ybox['x'],ybox['y']-0.016],{'font':0x2,'color':[0xff,0xff,0xff,0xff],'scale':[0.5,0.5],'outline':![]});}if(zbox!=undefined){mp['game'][a4_0x381a('0x7')][a4_0x381a('0xf')](zbox['x'],zbox['y'],0.015,0.026,0x0,0xff,0x0,0xff);mp['game'][a4_0x381a('0x7')][a4_0x381a('0x19')]('Z',[zbox['x'],zbox['y']-0.016],{'font':0x2,'color':[0xff,0xff,0xff,0xff],'scale':[0.5,0.5],'outline':![]});}if(switchbox!=undefined){mp[a4_0x381a('0x6')][a4_0x381a('0x7')][a4_0x381a('0xf')](switchbox['x'],switchbox['y'],0.06,0.026,0xff,0xff,0xff,0xff);mp[a4_0x381a('0x6')][a4_0x381a('0x7')][a4_0x381a('0xf')](groundbox['x'],groundbox['y'],0.06,0.026,0xff,0xff,0xff,0xff);mp[a4_0x381a('0x6')][a4_0x381a('0x7')][a4_0x381a('0xf')](cancelbox['x'],cancelbox['y'],0.06,0.026,0xff,0xff,0xff,0xff);mp['game']['graphics'][a4_0x381a('0xf')](savebox['x'],savebox['y'],0.06,0.026,0xff,0xff,0xff,0xff);mp[a4_0x381a('0x6')][a4_0x381a('0x7')][a4_0x381a('0x19')](mode==a4_0x381a('0x1a')?'Rotate':a4_0x381a('0x1a'),[switchbox['x'],switchbox['y']-0.016],{'font':0x0,'color':[0x0,0x0,0x0,0xff],'scale':[0.4,0.4],'outline':![]});mp['game']['graphics'][a4_0x381a('0x19')](a4_0x381a('0x8'),[groundbox['x'],groundbox['y']-0.016],{'font':0x0,'color':[0x0,0x0,0x0,0xff],'scale':[0.4,0.4],'outline':![]});mp[a4_0x381a('0x6')][a4_0x381a('0x7')]['drawText'](a4_0x381a('0x15'),[cancelbox['x'],cancelbox['y']-0.016],{'font':0x0,'color':[0x0,0x0,0x0,0xff],'scale':[0.4,0.4],'outline':![]});mp[a4_0x381a('0x6')][a4_0x381a('0x7')][a4_0x381a('0x19')](a4_0x381a('0x2'),[savebox['x'],savebox['y']-0.016],{'font':0x0,'color':[0x0,0x0,0x0,0xff],'scale':[0.4,0.4],'outline':![]});}let _0x581769=mp[a4_0x381a('0x14')][a4_0x381a('0x1b')][a4_0x381a('0xa')];let _0x30ab89={'x':_0x581769[0x0]-oldcursorPos[0x0],'y':_0x581769[0x1]-oldcursorPos[0x1]};_0x30ab89['x']/=res['x'];_0x30ab89['y']/=res['y'];if(curBtn=='x'){let _0x5bbad0=mp[a4_0x381a('0x6')][a4_0x381a('0x7')][a4_0x381a('0x16')](selObj[a4_0x381a('0xa')]['x'],selObj['position']['y'],selObj['position']['z']);let _0x464598;if(mode==a4_0x381a('0x1a')){_0x464598=mp[a4_0x381a('0x6')]['graphics'][a4_0x381a('0x16')](selObj[a4_0x381a('0xa')]['x']+0x1,selObj[a4_0x381a('0xa')]['y'],selObj['position']['z']);}else{_0x464598=mp['game'][a4_0x381a('0x7')]['world3dToScreen2d'](selObj['position']['x'],selObj[a4_0x381a('0xa')]['y']+0x1,selObj[a4_0x381a('0xa')]['z']);}if(_0x5bbad0==undefined||_0x464598==undefined)return;var _0x3ec9e5={'x':_0x464598['x']-_0x5bbad0['x'],'y':_0x464598['y']-_0x5bbad0['y']};var _0x4027e1=_0x30ab89['x']*_0x3ec9e5['x']+_0x30ab89['y']*_0x3ec9e5['y'];if(mode==a4_0x381a('0x1a')){selObj[a4_0x381a('0xa')]=new mp['Vector3'](selObj[a4_0x381a('0xa')]['x']+_0x4027e1*MOVE_SENSITIVTY,selObj['position']['y'],selObj[a4_0x381a('0xa')]['z']);}else{selObj[a4_0x381a('0x3')]=new mp[(a4_0x381a('0x1'))](selObj[a4_0x381a('0x3')]['x']-_0x4027e1*ROT_SENSITIVITY,selObj[a4_0x381a('0x3')]['y'],selObj['rotation']['z']);}}else if(curBtn=='y'){let _0x37cedb=mp[a4_0x381a('0x6')][a4_0x381a('0x7')][a4_0x381a('0x16')](selObj[a4_0x381a('0xa')]['x'],selObj[a4_0x381a('0xa')]['y'],selObj[a4_0x381a('0xa')]['z']);let _0x2c3d18;if(mode==a4_0x381a('0x1a')){_0x2c3d18=mp[a4_0x381a('0x6')][a4_0x381a('0x7')][a4_0x381a('0x16')](selObj[a4_0x381a('0xa')]['x'],selObj[a4_0x381a('0xa')]['y']+0x1,selObj[a4_0x381a('0xa')]['z']);}else{_0x2c3d18=mp[a4_0x381a('0x6')][a4_0x381a('0x7')]['world3dToScreen2d'](selObj[a4_0x381a('0xa')]['x']+0x1,selObj[a4_0x381a('0xa')]['y'],selObj[a4_0x381a('0xa')]['z']);}if(_0x37cedb==undefined||_0x2c3d18==undefined)return;var _0x3ec9e5={'x':_0x2c3d18['x']-_0x37cedb['x'],'y':_0x2c3d18['y']-_0x37cedb['y']};var _0x4027e1=_0x30ab89['x']*_0x3ec9e5['x']+_0x30ab89['y']*_0x3ec9e5['y'];if(mode==a4_0x381a('0x1a')){selObj['position']=new mp[(a4_0x381a('0x1'))](selObj[a4_0x381a('0xa')]['x'],selObj[a4_0x381a('0xa')]['y']+_0x4027e1*MOVE_SENSITIVTY,selObj['position']['z']);}else{selObj[a4_0x381a('0x3')]=new mp[(a4_0x381a('0x1'))](selObj[a4_0x381a('0x3')]['x'],selObj[a4_0x381a('0x3')]['y']+_0x4027e1*ROT_SENSITIVITY,selObj[a4_0x381a('0x3')]['z']);}}else if(curBtn=='z'){let _0x27e22b=mp[a4_0x381a('0x6')][a4_0x381a('0x7')][a4_0x381a('0x16')](selObj[a4_0x381a('0xa')]['x'],selObj['position']['y'],selObj[a4_0x381a('0xa')]['z']);let _0xe2b853=mp[a4_0x381a('0x6')][a4_0x381a('0x7')][a4_0x381a('0x16')](selObj['position']['x'],selObj['position']['y'],selObj['position']['z']+0x1);if(_0x27e22b==undefined||_0xe2b853==undefined)return;var _0x3ec9e5={'x':_0xe2b853['x']-_0x27e22b['x'],'y':_0xe2b853['y']-_0x27e22b['y']};var _0x4027e1=_0x30ab89['x']*_0x3ec9e5['x']+_0x30ab89['y']*_0x3ec9e5['y'];if(mode==a4_0x381a('0x1a')){selObj[a4_0x381a('0xa')]=new mp['Vector3'](selObj[a4_0x381a('0xa')]['x'],selObj['position']['y'],selObj['position']['z']+_0x4027e1*MOVE_SENSITIVTY);}else{selObj[a4_0x381a('0x3')]=new mp[(a4_0x381a('0x1'))](selObj[a4_0x381a('0x3')]['x'],selObj[a4_0x381a('0x3')]['y'],selObj[a4_0x381a('0x3')]['z']+_0x30ab89['x']*ROT_SENSITIVITY*0.2);}}oldcursorPos=_0x581769;}}catch(_0x4a7e77){selObj=null;}});mp[a4_0x381a('0xc')][a4_0x381a('0x17')](a4_0x381a('0xb'),(_0x14f807,_0x2a06ba,_0x575c13,_0x1730fe,_0x11dd1f,_0x579f76,_0x2b77d5,_0x1dd21b)=>{if(!selObj)return;let _0x2f089c={'x':_0x14f807/res['x'],'y':_0x2a06ba/res['y']};if(_0x575c13=='up'){curBtn='';}else if(_0x575c13==a4_0x381a('0x4')){if(xbox!=undefined&&_0x2f089c['x']>=xbox['x']-0.01&&_0x2f089c['x']<=xbox['x']+0.009&&_0x2f089c['y']>=xbox['y']-0.015&&_0x2f089c['y']<=xbox['y']+0.009){curBtn='x';}else if(ybox!=undefined&&_0x2f089c['x']>=ybox['x']-0.01&&_0x2f089c['x']<=ybox['x']+0.009&&_0x2f089c['y']>=ybox['y']-0.015&&_0x2f089c['y']<=ybox['y']+0.009){curBtn='y';}else if(zbox!=undefined&&_0x2f089c['x']>=zbox['x']-0.01&&_0x2f089c['x']<=zbox['x']+0.009&&_0x2f089c['y']>=zbox['y']-0.015&&_0x2f089c['y']<=zbox['y']+0.009){curBtn='z';}else if(switchbox!=undefined&&_0x2f089c['x']>=switchbox['x']-0.03&&_0x2f089c['x']<=switchbox['x']+0.03&&_0x2f089c['y']>=switchbox['y']-0.015&&_0x2f089c['y']<=switchbox['y']+0.009){switchMode();}else if(groundbox!=undefined&&_0x2f089c['x']>=groundbox['x']-0.03&&_0x2f089c['x']<=groundbox['x']+0.03&&_0x2f089c['y']>=groundbox['y']-0.015&&_0x2f089c['y']<=groundbox['y']+0.009){groundObject();}else if(cancelbox!=undefined&&_0x2f089c['x']>=cancelbox['x']-0.03&&_0x2f089c['x']<=cancelbox['x']+0.03&&_0x2f089c['y']>=cancelbox['y']-0.015&&_0x2f089c['y']<=cancelbox['y']+0.009){cancel();}else if(savebox!=undefined&&_0x2f089c['x']>=savebox['x']-0.03&&_0x2f089c['x']<=savebox['x']+0.03&&_0x2f089c['y']>=savebox['y']-0.015&&_0x2f089c['y']<=savebox['y']+0.009){saveChanges();}}});function switchMode(){mode=mode=='Move'?a4_0x381a('0x12'):a4_0x381a('0x1a');}function groundObject(){selObj[a4_0x381a('0x0')]();let _0x530327=selObj[a4_0x381a('0x1d')](!![]);let _0x5aa191=selObj[a4_0x381a('0x1c')](0x2);selObj[a4_0x381a('0xa')]=new mp[(a4_0x381a('0x1'))](_0x530327['x'],_0x530327['y'],_0x530327['z']);selObj[a4_0x381a('0x3')]=new mp['Vector3'](_0x5aa191['x'],_0x5aa191['y'],_0x5aa191['z']);}function cancel(){selObj[a4_0x381a('0xa')]=oldPos;selObj[a4_0x381a('0x3')]=oldRot;selObj[a4_0x381a('0x10')](!![],!![]);selObj=null;mp[a4_0x381a('0x14')]['cursor'][a4_0x381a('0x11')](![],![]);}function saveChanges(){let _0x48781a=selObj[a4_0x381a('0x1d')](!![]);let _0x46f991=selObj[a4_0x381a('0x1c')](0x2);mp[a4_0x381a('0xc')][a4_0x381a('0x9')]('objecteditor:finish',selObj['id'],JSON['stringify'](_0x48781a),JSON[a4_0x381a('0x18')](_0x46f991));selObj[a4_0x381a('0x10')](!![],!![]);selObj=null;mp['gui']['cursor'][a4_0x381a('0x11')](![],![]);}
}